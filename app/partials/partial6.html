<div class="row" style="text-align: center">

  <div class="form-group">
    <input type="text"
	   ng-model="gene_name"
	   size="14"
	   placeholder="Gene name">
    <span ng-hide="gene"><p> e.g. SPU_013015 or SPU_022066</p></span>
    <span ng-show="gene"><p>is on {{gene.scaffold}} from {{gene.span[0]}} to {{gene.span[1]}}</p></span>
    <span ng-show="gene">
      <p>Start
	<input
	   type="number"
	   min="0"
	   max="{{gene.end}}"
	   step="1000"
	   ng-model="desired_sequence_span[0]" size="8">
	= {{gene.span[0] - desired_sequence_span[0]}} from {{gene.span[0]}}
	| {{gene.span[1]}} = {{desired_sequence_span[1] - gene.span[1]}} to
	<input
	   type="number"
	   min="{{gene.start}}"
	   max="1000000"
	   step="1000"
	   ng-model="desired_sequence_span[1]" size="8"> End
      </p>
    </span>

    <form ng-show="gene" ng-submit="makePrimers()">
      target span: <input type="number"
			  ng-model="prime.target_primer_span"
			  min="1"
			  max="10000"
			  placeholder="span">bp,
      minimum span: <input type="number"
			   ng-model="prime.minimum_primer_span"
			   min="1"
			   max="10000"
			   placeholder="span">bp,
      max span: <input type="number"
		       ng-model="prime.maximum_primer_span"
		       min="1"
		       max="10000"
		       placeholder="max span">bp,
      min overlap: <input type="number"
			  ng-model="prime.minimum_overlap"
			  min="0"
			  max="10000"
			  placeholder="min overlap">bp,
      fuzz: <input type="number"
		   ng-model="prime.fuzz"
		   min="0"
		   max="5000"
		   placeholder="fuzz">bp<br/>
      <input class="btn btn-primary"
	     type="submit"
	     value="make primers"
	     style="visibility:show">
    </form>
  </div>
</div>
<div class="row" style="text-align: left">
  <div class="col-xs-12 col-lg-12" ng-show="gene">
    <p ng-show="gene">See it on
      <a href="http://www.echinobase.org/Echinobase/JBrowse-1.10.9/index.html?data=data_sp&loc={{gene.scaffold}}%3A{{sequence_span_to_examine[0]}}..{{sequence_span_to_examine[1]}}&tracks=DNA%2CGLEAN%2CTranscriptome%2Ccontig%2CeBAC"
	 target="_blank">JBrowse</a></p>

    <tabset>
      <tab heading="Sequence">
	<p>Legend:
	  <span class="seq">
	    <span class="gene">GENE</span>
	    <span class="transcript">TRANSCRIPT</span>
	    <span class="exon">EXON</span>
	  </span>
	</p>
	<format-tree tree="gene"
		     sequence-info="sequence_info"
		     primer-pairs="primer_pairs"
		     tickle-counter="soa_tickle_counter"></format-tree>
      </tab>
      <tab heading="Primers">
	<accordion ng-show="gene" close-others="false">
	  <accordion-group heading="{{$index}}: {{ppp.sequence_primer_pair_ok_region_list[0]}} - {{ppp.sequence_primer_pair_ok_region_list[2]}}: {{ppp.primer_pair_num_returned}}" ng-repeat="ppp in ppp_list">
	    <ul>
	      <li ng-repeat="pp in ppp.primer_pairs">
		left: {{pp.left.start}} {{pp.left.sequence}}, right: {{pp.right.start}} {{pp.right.sequence}}
	      </li>
	    </ul>
	  </accordion-group>
	</accordion>
      </tab>
      <tab heading="Gene {{gene.name}}" ng-show="gene">
	  <pre style="text-align: left" ng-show="gene">{{gene | json}}</pre>
      </tab>
      <tab heading="Debug">
	desired sequence span: {{desired_sequence_span | json}}<br/>
	excluded spans: {{prime.excluded_spans | json}}<br/>
	primer windows: {{prime.primer_windows | json}}<br/>
	soa.length: {{soa.length}}<br/>
      </tab>
    </tabset>
  </div>
</div>
